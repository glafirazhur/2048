(window.webpackJsonp2048=window.webpackJsonp2048||[]).push([[0],{18:function(e,t,r){e.exports=r(39)},23:function(e,t,r){},24:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){"use strict";r.r(t);var o=r(0),n=r.n(o),s=r(6),c=r.n(s),a=(r(23),r(24),r(2)),l=r(3),i=r(13),u=r(10),P=r(14),p=r(15),m=r.n(p),f=r(5),w=r(17),d={tiles:[],emptyFields:[{rowPos:1,colPos:1,isEmpty:!0},{rowPos:1,colPos:2,isEmpty:!0},{rowPos:1,colPos:3,isEmpty:!0},{rowPos:1,colPos:4,isEmpty:!0},{rowPos:2,colPos:1,isEmpty:!0},{rowPos:2,colPos:2,isEmpty:!0},{rowPos:2,colPos:3,isEmpty:!0},{rowPos:2,colPos:4,isEmpty:!0},{rowPos:3,colPos:1,isEmpty:!0},{rowPos:3,colPos:2,isEmpty:!0},{rowPos:3,colPos:3,isEmpty:!0},{rowPos:3,colPos:4,isEmpty:!0},{rowPos:4,colPos:1,isEmpty:!0},{rowPos:4,colPos:2,isEmpty:!0},{rowPos:4,colPos:3,isEmpty:!0},{rowPos:4,colPos:4,isEmpty:!0}],score:{currentScore:0,bestScore:0},gameStatus:!1};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},v=function(e){return e[Math.floor(Math.random()*e.length)]},g=function(e,t,r){return e.map(function(e){var o=e;return e.colPos===t.colPos&&e.rowPos===t.rowPos&&(o=y({},o,{isEmpty:!0})),e.colPos===r.colPos&&e.rowPos===r.rowPos&&(o=y({},o,{isEmpty:!1,isMerged:r.isMerged,tileVal:r.tileVal})),o})},b=function(e,t){switch(e){case"left":return t.sort(function(e,t){return e.rowPos!==t.rowPos?e.rowPos-t.rowPos:e.colPos-t.colPos});case"right":return t.sort(function(e,t){return e.rowPos!==t.rowPos?e.rowPos-t.rowPos:t.colPos-e.colPos});case"up":return t.sort(function(e,t){return e.rowPos!==t.rowPos?e.rowPos-t.rowPos:e.colPos-t.colPos});case"down":return t.sort(function(e,t){return e.rowPos!==t.rowPos?t.rowPos-e.rowPos:e.colPos-t.colPos});default:return[]}};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.tiles,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RANDOM_TILE":var r=t.payload.filter(function(e){return!0===e.isEmpty}),o=v(r);return o?[].concat(Object(w.a)(e),[{rowPos:o.rowPos,colPos:o.colPos,tileVal:v([2,4])}]):e;case"INIT_FIRST_TILES":for(var n=[],s=function(){var e=O(1,4),t=O(1,4);n.find(function(r){var o=r.rowPos,n=r.colPos;return o===e&&n===t})||n.push({rowPos:e,colPos:t,tileVal:2})};n.length<2;)s();return n;case"UPDATE_POSITION":var c=b(t.payload.direction,e),a=[],l=t.payload.emptyFields.map(function(e){return j({},e,{isMerged:!1})}),i=c.map(function(e){var r=l.filter(function(t){return t.rowPos===e.rowPos}),o=l.filter(function(t){return t.colPos===e.colPos});switch(t.payload.direction){case"left":for(var n=e.colPos,s=n-2<0?0:n-2;s>=0&&(r[s].colPos!==e.colPos&&r[s].isEmpty);s-=1)n=r[s].colPos;if(n){var c=!1,i=e.tileVal,u=n-1,P=l.find(function(t){var r=t.rowPos,o=t.colPos,n=t.isEmpty,s=t.isMerged;return o===u&&r===e.rowPos&&!n&&!s});return P&&P.tileVal===e.tileVal&&(a.push({rowPos:P.rowPos,colPos:P.colPos,tileVal:P.tileVal}),n=u,i=2*e.tileVal,c=!0),l=g(l,e,{rowPos:e.rowPos,colPos:n,tileVal:i,isMerged:c}),j({},e,{colPos:n,tileVal:i})}return e;case"right":for(var p=e.colPos,m=p;m<4&&(r[m].colPos!==e.colPos&&r[m].isEmpty);m+=1)p=r[m].colPos;if(p){var f=!1,w=e.tileVal,d=p+1,E=l.find(function(t){var r=t.rowPos,o=t.colPos,n=t.isEmpty,s=t.isMerged;return o===d&&r===e.rowPos&&!n&&!s});return E&&E.tileVal===e.tileVal&&(a.push({rowPos:E.rowPos,colPos:E.colPos,tileVal:E.tileVal}),p=d,w=2*e.tileVal,f=!0),l=g(l,e,{rowPos:e.rowPos,colPos:p,tileVal:w,isMerged:f}),j({},e,{colPos:p,tileVal:w})}return e;case"up":for(var y=e.rowPos,O=y-2<0?0:y-2;O>=0&&(o[O].rowPos!==e.rowPos&&o[O].isEmpty);O-=1)y=o[O].rowPos;if(y){var v=!1,b=e.tileVal,h=y-1,S=l.find(function(t){var r=t.rowPos,o=t.colPos,n=t.isEmpty,s=t.isMerged;return o===e.colPos&&r===h&&!n&&!s});return S&&S.tileVal===e.tileVal&&(a.push({rowPos:S.rowPos,colPos:S.colPos,tileVal:S.tileVal}),y=h,b=2*e.tileVal,v=!0),l=g(l,e,{rowPos:y,colPos:e.colPos,tileVal:b,isMerged:v}),j({},e,{rowPos:y,tileVal:b})}return e;case"down":for(var N=e.rowPos,V=N;V<4&&(o[V].rowPos!==e.rowPos&&o[V].isEmpty);V+=1)N=o[V].rowPos;if(N){var _=!1,D=e.tileVal,T=N+1,I=l.find(function(t){var r=t.rowPos,o=t.colPos,n=t.isEmpty,s=t.isMerged;return o===e.colPos&&r===T&&!n&&!s});return I&&I.tileVal===e.tileVal&&(a.push({rowPos:I.rowPos,colPos:I.colPos,tileVal:I.tileVal}),N=T,D=2*e.tileVal,_=!0),l=g(l,e,{rowPos:N,colPos:e.colPos,tileVal:D,isMerged:_}),j({},e,{rowPos:N,tileVal:D})}return e;default:return e}});return i.filter(function(e){var t=a.find(function(t){var r=t.colPos,o=t.rowPos,n=t.tileVal;return e.colPos===r&&e.rowPos===o&&e.tileVal===n});return t?e.rowPos!==t.rowPos&&e.colPos!==t.colPos:e});default:return e}};function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.emptyFields,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EMPTIES":var r=t.payload,o=e.map(function(e){var t=r.find(function(t){var r=t.rowPos,o=t.colPos;return r===e.rowPos&&o===e.colPos});return V({},e,t?{isEmpty:!1}:{isEmpty:!0})});return o;case"INIT_EMPTIES":return d.emptyFields;default:return e}};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach(function(t){Object(f.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.score,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SCORE":var r=e.bestScore,o=e.currentScore+t.payload;return T({},e,{currentScore:o,bestScore:r=r?Math.max(o,r):t.payload});case"CLEAR_CURRENT_SCORE":return T({},e,{currentScore:d.score.currentScore});default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.gameStatus,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAME":return!0;case"FINISH_GAME":return!1;default:return e}},R=Object(a.c)({tiles:S,emptyFields:_,score:I,gameStatus:M}),A=r(16),k=(r(32),r(33),function(){return n.a.createElement("div",{className:"grid"},n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}),n.a.createElement("div",{className:"grid-cell"}))}),F=(r(34),r(35),function(e){var t=e.tileVal,r=e.rowPos,o=e.colPos;return n.a.createElement("div",{className:"number number--".concat(t," pos--").concat(r,"-").concat(o)},t)}),L=function(e){var t=e.tiles;return n.a.createElement("div",{className:"grid numbers"},t.map(function(e){return n.a.createElement(F,{key:"".concat(e.rowPos,"-").concat(e.colPos),rowPos:e.rowPos,colPos:e.colPos,tileVal:e.tileVal})}))};L.defaultProps={tiles:[]};var U=Object(l.b)(function(e){return{tiles:e.tiles}})(L),C=(r(36),function(e){return{type:"UPDATE_EMPTIES",payload:e}}),G=function(){return function(e,t){e({type:"INIT_GAME"}),e({type:"CLEAR_CURRENT_SCORE"}),e({type:"INIT_EMPTIES"}),e({type:"INIT_FIRST_TILES"}),e(C(t().tiles))}},X=function(e){var t=e.initGame,r=e.children;return n.a.createElement("button",{type:"button",className:"start-button",onClick:t},r)};X.defaultProps={children:"Start again"};var x=n.a.memo(Object(l.b)(void 0,function(e){return{initGame:function(){return e(G())}}})(X)),B=(r(37),n.a.memo(Object(l.b)(function(e){return{score:e.score}})(function(e){var t=e.score,r=e.scoreType,o="current"===r?"Your score":"Best score",s="current"===r?t.currentScore:t.bestScore;return n.a.createElement("div",{className:"score"},n.a.createElement("span",{className:"score__label"},o),n.a.createElement("span",{className:"score__value"},s))}))),H=(r(38),n.a.memo(function(){return n.a.createElement("div",{className:"game-status"},"END GAME",n.a.createElement(x,null,"Restart"))})),J=Object(l.b)(function(e){return{tiles:e.tiles,gameStatus:e.gameStatus}},function(e){return{initGame:function(){return e(G())},updateTilesPosition:function(t){return e(function(e){return function(t,r){t(function(e,t){return{type:"UPDATE_POSITION",payload:{direction:e,emptyFields:t}}}(e,r().emptyFields)),t(C(r().tiles)),t({type:"ADD_RANDOM_TILE",payload:r().emptyFields}),t(C(r().tiles)),r().emptyFields.filter(function(e){return e.isEmpty}).length||t({type:"FINISH_GAME"})}}(t))}}})(function(e){var t=e.initGame,r=e.updateTilesPosition,s=e.gameStatus,c=function(){r("left")},a=function(){r("right")},l=function(){r("up")},i=function(){r("down")};return Object(o.useEffect)(function(){t(),document.addEventListener("keydown",function(e){switch(e.keyCode){case 37:c();break;case 38:l();break;case 39:a();break;case 40:i()}})},[]),n.a.createElement(A.a,{onSwipedLeft:c,onSwipedRight:a,onSwipedUp:l,onSwipedDown:i,className:"wrap"},n.a.createElement("h1",{className:"game-header"},"2048"),n.a.createElement("p",{className:"game-description"},"Use Up, Down, Left, Right keys or swipe to play"),n.a.createElement(x,null),n.a.createElement("div",{className:"score-wrap"},n.a.createElement(B,{scoreType:"current"}),n.a.createElement(B,{scoreType:"best"})),n.a.createElement("div",{className:"game__container"},n.a.createElement(k,null),n.a.createElement(U,null),s?null:n.a.createElement(H,null)))}),Y={key:"root",storage:m.a},q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||a.d,z=Object(u.a)(Y,R),K=Object(a.e)(z,q(Object(a.a)(i.a))),Q=Object(u.b)(K);Q.purge(),c.a.render(n.a.createElement(l.a,{store:K},n.a.createElement(P.a,{persistor:Q,loading:null},n.a.createElement(J,null))),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.c467b1d2.chunk.js.map